---
app:
  network: mainnet
  home_dir: "~/.greenfloor"
  log_level: INFO
  run_mode: daemon

keys:
  registry:
    - key_id: "key-main-1"
      fingerprint: 123456789
      network: "mainnet"
      keyring_yaml_path: "~/.chia_keys/keyring.yaml"
    - key_id: "key-main-2"
      fingerprint: 987654321
      network: "mainnet"
      keyring_yaml_path: "~/.chia_keys/keyring.yaml"

runtime:
  loop_interval_seconds: 30
  dry_run: false

cloud_wallet:
  # Cloud Wallet GraphQL API origin only (manager appends /graphql).
  # Source: https://vault.chia.net/settings.json -> GRAPHQL_URI
  base_url: "https://api.vault.chia.net"
  # Settings -> API Keys -> Key Id (route: /settings/api-keys)
  # Find at: https://vault.chia.net → Settings → API Keys → copy Key Id
  user_key_id: ""
  # Local path to downloaded API private key PEM.
  # Keep full PEM text in file (BEGIN/END PRIVATE KEY), not base64-only text.
  private_key_pem_path: "~/.greenfloor/keys/cloud-wallet-user-auth-key.pem"
  # Wallet GraphQL ID from target vault URL segment .../wallet/<ID>/...
  # Find at: https://vault.chia.net → open vault → copy Wallet_... from URL
  vault_id: ""
  # AWS KMS P-256 custody key for vault signing.
  # Requires AWS credentials (~/.aws/credentials or env vars) on the host.
  # Find at: AWS Console → KMS → Customer managed keys → copy ARN
  kms_key_id: ""
  # AWS region where the KMS key lives (e.g. us-west-2).
  kms_region: ""
  # Compressed P-256 public key hex (33 bytes). Derive with:
  #   python -c "from greenfloor.adapters.kms_signer import \
  #     get_public_key_compressed_hex; \
  #     print(get_public_key_compressed_hex('<kms_key_id>', '<region>'))"
  kms_public_key_hex: ""

coin_ops:
  max_operations_per_run: 20
  max_daily_fee_budget_mojos: 0
  # Fallback when Coinset fee advice is unavailable (0.00001 XCH default).
  # Set to 0 to allow zero-fee fallback policy.
  minimum_fee_mojos: 10000000
  split_fee_mojos: 0
  combine_fee_mojos: 0

venues:
  dexie:
    api_base: "https://api.dexie.space"
  splash:
    api_base: "http://john-deere.hoffmang.com:4000"
  offer_publish:
    provider: "dexie"

dev:
  python:
    min_version: "3.11"
    manager: uv
    venv_path: ".venv"
  lint:
    tool: ruff
  typing:
    tool: pyright

notifications:
  low_inventory_alerts:
    enabled: true
    send_for_assets_in_sell_markets_only: true
    threshold_mode: "absolute_base_units"
    default_threshold_base_units: 0
    default_threshold_percent: null
    dedup_cooldown_seconds: 21600
    clear_hysteresis_percent: 10
    include_receive_address: true
    include_remaining_balance: true
  providers:
    - type: pushover
      enabled: true
      user_key_env: "PUSHOVER_USER_KEY"
      app_token_env: "PUSHOVER_APP_TOKEN"
      recipient_mode: "user_or_group"
      recipient_key_env: "PUSHOVER_RECIPIENT_KEY"

chain_signals:
  mempool_monitor:
    enabled: true
    source: "coinset"
    poll_interval_seconds: 20
  tx_block_trigger:
    mode: "websocket"
    source: "coinset"
    # Coinset websocket endpoint; when empty, defaults by network profile.
    # mainnet: wss://api.coinset.org/ws
    # testnet11: wss://testnet11.api.coinset.org/ws
    websocket_url: ""
    websocket_reconnect_interval_seconds: 30
    webhook_enabled: false
    webhook_listen_addr: "127.0.0.1:8787" # legacy field; websocket mode ignores this listener.
    # Recovery poll cadence used by websocket mode to refresh mempool tx snapshots.
    fallback_poll_interval_seconds: 60
